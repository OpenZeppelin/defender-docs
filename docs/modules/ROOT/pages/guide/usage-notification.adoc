= Manage custom and system usage notifications

Defender enables you to receive notifications when your usage exceeds a certain threshold. This guide will walk you through the steps of setting up custom usage notifications and managing system usage notifications. Defender currently tracks usage metrics such as:

* Monitor Alerts: The number of times your monitors have triggered an alert.
* Action Runs: The number of times your actions have been executed.
* Relayer Transactions: The number of transactions your relayers have processed.
* Code Inspector Reports: The number of reports generated by Code Inspector.
* Transaction Proposals: The number of proposals created.

In addition, Defender provides default system usage notifications triggered when your usage exceeds 90% and 100%, respectively. For users with overages or metered billing enabled, only system usage notifications are triggered when usage surpasses 200%. These notifications are sent to the email addresses of all tenant administrator users.

[[pre-requisites]]
== Pre-requisites

* OpenZeppelin Defender account. You can sign up for Defender https://defender.openzeppelin.com/v2/?utm_campaign=Defender_2.0_2023&utm_source=Docs#/auth/sign-up[here, window=_blank].

[[configure-usage-notification]]
== 1. Configure a custom usage notification

You will configure a custom usage notification for when your Action Runs usage exceeds 75% of your quota. You will set up an alert to be sent to all tenant administrators when this happens. To configure a custom usage notification, follow these steps:

. Open https://defender.openzeppelin.com/v2/#/billing/settings[Defender Billing Settings, window=_blank] in a web browser.
. Click on *Create Notification* in the top-right corner of the Notifications section.
+
image::guide-usage-notifications-all.png[Billing Settings]
+
. In the *Create Notification* dialog:
** Enter a name for the notification. For example, `Action Runs Usage 75%`.
** Select the usage metric you want to monitor. In this case, select `Action Runs`.
** Set the threshold to 75. Below, you will see the current usage and the absolute value of the threshold for the selected metric.
** Select the "All Tenant Administrators" notification channel. For now, your selection is limited to **Slack** and **Email**.
+
image::guide-usage-notifications-create.png[Usage Notification Create Dialog, width=400]

At any time, you may pause or unpause usage notifications. You can do this by toggling the switch next to the notification name. You can also manage your notifications by clicking on the three dots next to the notification threshold. From the dropdown menu, you can edit or delete the notification. System usage notifications can only be paused.

image::guide-usage-notifications-edit-menu.png[Manage Notification]

[[manage-system-usage-notification]]
== 2. Pause a system usage notification

You will pause a system usage notification for when Monitor Alerts usage exceeds 90% (or 200% for users with overages enabled) of your quota. If overages are enabled for your account, you will see the *Surpassing* notifications. Otherwise, you will only see the *Nearing* and *Exceeding* notifications.

To pause a system usage notification, follow these steps:

. Open https://defender.openzeppelin.com/v2/#/billing/settings[Defender Billing Settings, window=_blank] in a web browser.
. Filter the notifications table by selecting the "System" tab.
. Locate the *Nearing Monitor Alerts* or *Surpassing Monitor Alerts* notification.
. Toggle the switch to pause the notification.

image::guide-usage-notifications-system-unmetered.png[Nearing Monitor Alerts]

image::guide-usage-notifications-system.png[Surpassing Monitor Alerts]

NOTE: If a user disabled system notifications from their profile, they will also be opted out of all system notifications, regardless of their individual paused state. 

image::guide-profile-disable-system-notifications.png[Disable System Notifications]

[[next-steps]]
== Next steps

Congratulations! You have successfully set up a custom usage notification. Once your Action Runs usage exceeds the 75% threshold, all your tenant administrators will receive an email notification. In addition, you have paused the default system usage notification for when Monitor Alert exceeds the 90% (or 200% for users with overages enabled) threshold. Therefore, your tenant administrators will no longer receive a system email notification when this happens.