[[code-inspector]]
= Code Inspector

Code Inspector seamlessly integrates with Github to maximize security with every step of your development process via automatic code analysis powered by machine learning intelligence and state-of-the-art tools developed by our security experts.

For every push to your code, the OpenZeppelin Code Inspector dives into a detailed examination, identifying potential vulnerabilities and suggesting improvements to enhance your code quality. It generates a succinct report, summarizable in your PR comments for quick and immediate access, while a more detailed report is made available on Defender 2.0.
 
[[use-cases]]
== Use Cases

* Automatically conduct security analysis on pull requests, identifying vulnerabilities and suggesting improvements.
* Utilize summarized reports in the pull request for immediate insights into your code's health and security.
* Access comprehensive, detailed reports on Defender 2.0 for an in-depth understanding of potential vulnerabilities and code optimization areas.
* Use OpenZeppelin's Dependency Checker to identify reused contracts and match them against a database of known vulnerabilities.
* Apply static analysis rules to Solidity files, identifying potential issues and their severity for high-quality code maintenance.

[[features]]
== Features

[IMPORTANT]
Some issues found by Code Inspector are detected by our AI models. Keep in mind that while we provide confidence levels, the models may occasionally generate incorrect or misleading information. Make sure to verify the information accordingly and we'd love to hear your feedback.

Code Inspector has a wide range of functionalities designed to enhance security, efficiency, and code quality. These processes are powered by machine learning models and state-of-the-art tools developed by our security experts.

* *Reused Code*: Identifies vulnerabilities in reused smart contract code by generating a unique fingerprint for each contract and matching it against a database of known issues.
* *Vulnerable Dependencies*: Notify when a OpenZeppelin Contracts dependency with a known vulnerability is used, providing you with the necessary information to address the issue.
* *Test Suggestions*: Opportunities to apply fuzzing tests to functions, providing you with areas where further testing could prove beneficial.
* *External Call Safety*: Safety of external calls, highlighting any instances that might pose a severity concern.
* *Standard Compatibility*: Compatibility of your contracts with established standards, flagging potential compatibility issues.
* *Reentrancy Attack Vectors*: Potential reentrancy attack vectors at both the file and function level, assigning these threats high-severity labels.
* *Code Readability*: Missing docstrings in functions and misspelled words throughout the codebase, ensuring your code is as legible and understandable as possible.
* *Code Efficiency and Security Practices*: Areas in your code where improvements can be made for better performance and highlights potential security risks, enabling you to optimize and secure your contracts more effectively.


[[installation]]
== Installation

[NOTE]
Installation must be initiated from Defender 2.0. Installing the app directly from GitHub will not correctly set up the integration.

The installation process connects your Defender 2.0 account and your GitHub repositories. Follow the following steps:

. Navigate to the https://defender.openzeppelin.com/v2/#/code[Code Inspector page, window=_blank] on Defender 2.0.
. Click on the Install Code Inspector button, which redirects you to Github.
. Select and approve the repositories to install the app.
. Generate your first report by creating or updating a pull request on a repository that has the app installed.

The installation is currently done solely through Defender 2.0, ensuring a seamless connection for the reports. Following the installation, no additional setup is required. If you encounter installation issues, refer to our <<installation-issues,Troubleshooting>> section for guidance.

[[usage]]
== Usage

Code Inspector is designed to streamline your code analysis workflow. Once installed, the app is triggered whenever a pull request (PR) is opened, or a new commit is pushed to an existing PR in your GitHub repository. 

The app automatically generates a summary report for each new commit, which is posted as a comment in your PR. This summary report is continuously updated with the latest issues discovered in the most recent commit, and the commit hash is directly viewable in the report.

Along with the summary reports in PR comments, a detailed report for each commit is created and can be accessed on Defender 2.0, offering in-depth information on the identified issues and how to fix them.

If you wish to stop receiving reports for a specific repository, it's as simple as navigating to the Code Inspector settings and removing the respective repository from the list.

[[reports]]
== Reports

[[summary]]
=== Summary Report

The summary report provides a clear overview of potential vulnerabilities detected in the code during the review process. The report is conveniently categorized by process and severity level, making it easier to identify areas that need attention. You can navigate to the complete report on Defender 2.0 via the provided link. Each report is tied to a specific commit, ensuring accurate tracking of changes and issues over time.
 
image::code-report-summary.png[Summary Report]

In this example, you can see the number of issues detected by Code Inspector, along with their respective severity levels. By clicking the link at the bottom of the report, you can view the full details of these vulnerabilities on Defender 2.0.

[[full]]
=== Full Report

Full reports, as depicted below, identify issues within your smart contracts using a broad range of rules. The rules cover many aspects, such as known vulnerabilities, best practices, code efficiency, and secure coding principles.

image::contract-inspector-detailed-report.png[Full Report 1]

Each issue is assigned a severity level based on the potential impact on the contract's functionality and security. An explanation accompanies each flagged issue, articulating the reason for the concern.

Every issue has a suggested resolution tailored to improving your code quality and overall security. This might include recommendations to refine your code, modify visibility scopes, apply necessary mathematical checks, enhance documentation, or adhere to a specific Ethereum standard.

Depicted below is an example of a vulnerability detected in a dependency with a brief description of its potential impact. The specific dependency and its version are outlined, pinpointing where the problem exists. 

image::dependency-checker-detailed-report.png[Dependency Checker Report]

To help you resolve these issues recommendations on updates or patches that can address the vulnerabilities are provided along with the relevant advisory links for a more detailed understanding of the issue.

By reviewing and applying the proposed solutions in this report, you can enhance the robustness and reliability of your smart contracts, ensuring adherence to best practices and industry standards. This makes the audit process smoother and improves the preparedness of your contracts for successful deployment.


[[settings]]
== Settings

The Settings page allows you to manage the permissions and access level of the Code Inspector.

In the Repositories tab, you can view all the repositories where the app is currently installed, helping you track where the app is actively conducting code analysis. If you need to make changes to the repositories that the app has access to, a convenient link takes you directly to the GitHub settings page of the app, facilitating effortless repository management.

image::code-settings-repositories.png[Code Repositories Settings]

In the Advanced tab, you can globally suspend or uninstall the app, giving you complete control over its operation within your projects.

image::code-settings-advanced.png[Code Advanced Settings]

[[troubleshooting]]
== Troubleshooting

[[installation-issues]]
=== Installation Issues

* *Installing the app outside Defender 2.0*: Code Inspector must be installed via Defender 2.0. If you attempt to install it from elsewhere, the installation will not succeed. Ensure you're logged in to your OpenZeppelin account and navigate to Code Inspector from Defender 2.0 for a successful installation.

* *Code Inspector Access*: Access to Code Inspector is required for a successful installation. If you find that you don't have access and you think this is a mistake, contact OpenZeppelin support to get the necessary permissions.